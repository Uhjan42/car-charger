<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Car Carger</title>
		<link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
		<script src="./node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
		<script src=admin.js></script>
	</head>
	<body onload="loadStatus()">
		<div class="container-sm">
			<h2>Car Charger Admin Page</h2>

			<div class="accordion" id="accordionAdmin">
				<div class="accordion-item">
					<h2 class="accordion-header" id="headingOne">
						<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
							Infos PV
						</button>
					</h2>
					<div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionAdmin">
						<div class="accordion-body">
							<table>
								<tr><th>Verbrauch (kw): </th><td id="td-load"></td></tr>
								<tr><th>Netzbezug (kw): </th><td id="td-purchase"></td></tr>
								<tr><th>Einspeisung (kw): </th><td id="td-feedin"></td></tr>
								<tr><th>Produktion (kw): </th><td id="td-pv"></td></tr>
								<tr><th>Batterieladung (kw): </th><td id="td-loadstorage"></td></tr>
								<tr><th>Batteriestand (%): </th><td id="td-storage"></td></tr>
								<tr><th>Überschuss (kw): </th><td id="td-balance"></td></tr>
								<tr><th>Autoladung (kw): </th><td id="td-loadingcar"></td></tr>
							</table>
							<button type="button" class="btn btn-primary mt-3" onclick="loadStatus();">Aktuallisieren</button>
						</div>
					</div>	
				</div>			

				<div class="accordion-item">
					<h2 class="accordion-header" id="headingTwo">
						<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
							Einstellungen
						</button>
					</h2>
					<div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionAdmin">
						<div class="accordion-body">
							<form onsubmit="event.preventDefault();saveConfig();">
								<div class="mb-3">
									<label for="td-apikey" class="form-label">API Key:</label>
									<input type="text" id="td-apikey" size=32 class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-siteid" class="form-label">Site ID:</label>
									<input type="text" id="td-siteid" class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-nrg-ip" class="form-label">NRG Kick IP Adresse:</label>
									<input type="text" id="td-nrg-ip" class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-nrg-password" class="form-label">NRG Kick BLE Passwort:</label>
									<input type="password" id="td-nrg-password" class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-feedinthreshold" class="form-label">Überschuss für Ladung (kW):</label>
									<input type="number" step=0.1 id="td-feedinthreshold" class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-reservepower" class="form-label">Reserve bei Ladung (kW):</label>
									<input type="number" step=0.1 id="td-reservepower" class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-batterythreshold" class="form-label">Batteriemindeststand (%):</label>
									<input type="number" id="td-batterythreshold" class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-leastloading" class="form-label">Mindestladedauer (Min.):</label>
									<input type="number" id="td-leastloading" class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-mincurrent" class="form-label">Mindestladestrom (A):</label>
									<input type="number" id="td-mincurrent" class="form-control">
								</div>
								<div class="mb-3">
									<label for="td-maxcurrent" class="form-label">Maximalladestrom (A):</label>
									<input type="number" id="td-maxcurrent" class="form-control">
								</div>
								<div class="mb-3">
									Dreiphasig: 
									<div class="btn-group" role="group" aria-label="Basic radio toggle button group" id="filterPhases">

										<input type="radio" class="btn-check" autocomplete="off" name="threephases" id="r-threephasesyes" value="yes">
										<label class="btn btn-outline-primary" for="r-threephasesyes">Ja</label>

										<input type="radio" class="btn-check" autocomplete="off" name="threephases" id="r-threephasesno" value="no">
										<label class="btn btn-outline-primary" for="r-threephasesno">Nein</label>

									</div>
								</div>
								<div class="mb-3">
									Ladestatus:
									<div class="btn-group" role="group" aria-label="Basic radio toggle button group" id="filterState">

										<input type="radio" class="btn-check" autocomplete="off" name="loading" id="r-loadingon" value="on">
										<label class="btn btn-outline-primary" for="r-loadingon">An</label>

										<input type="radio" class="btn-check" autocomplete="off" name="loading" id="r-loadingauto" value="auto"> 
										<label class="btn btn-outline-primary" for="r-loadingauto">Auto</label>

										<input type="radio" class="btn-check" autocomplete="off" name="loading" id="r-loadingoff" value="off"> 
										<label class="btn btn-outline-primary" for="r-loadingoff">Aus</label>

									</div>
								</div>
								<div class="mb-3">
									Daueraus im Modus "Auto": 
									<div class="btn-group" role="group" aria-label="Basic radio toggle button group" id="filterAlwaysOffAuto">

										<input type="radio" class="btn-check" autocomplete="off" name="alwaysoff" id="r-alwaysoffautoyes" value="yes">
										<label class="btn btn-outline-primary" for="r-alwaysoffautoyes">Ja</label>

										<input type="radio" class="btn-check" autocomplete="off" name="alwaysoff" id="r-alwaysoffautono" value="no">
										<label class="btn btn-outline-primary" for="r-alwaysoffautono">Nein</label>

									</div>
								</div>
								<button type="submit" class="btn btn-primary">Speichern</button>
							</form>	
						</div>				
					</div>
				</div>

				<div class="accordion-item">
					<h2 class="accordion-header" id="headingThree">
						<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
							Passwort ändern
						</button>
					</h2>
					<div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionAdmin">
						<div class="accordion-body">
							<form onsubmit="event.preventDefault();savePassword();">
								<label for="tf-oldpassword" class="form-label">altes Passwort:</label>
								<input type="password" id="tf-oldpassword" class="form-control">
								<label for="tf-password" class="form-label">neues Passwort:</label>
								<input type="password" id="tf-password" class="form-control">
								<label for="tf-password-confirm" class="form-label">Passwort wiederholen:</label>
								<input type="password" id="tf-password-confirm" class="form-control">
								<button type="submit" class="btn btn-primary">Passwort speichern</button>
							</form>	
						</div>
					</div>
				</div>
			</div>
			<form action="/login" class="mt-3">
				<button type="submit" class="btn btn-danger">Abmelden</button>
			</form>		
		</div>
	</body>	
</html>